{"version":3,"sources":["now-confirm-dialog.ts"],"names":[],"mappings":"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","file":"now-confirm-dialog.js","sourcesContent":["namespace NowElements {\n\t/**\n\t * Type representing details expected when firing a Zion.EventHelpers.open_confirm event.\n\t * Steps for opening a dialog:\n\t */\n\texport type ConfirmDialogConfig = {\n\t\tdialogTitle: string;\n\t\tdialogText: string;\n\t\tconfirmButtonText?: string;\n\t\tcancelButtonText?: string;\n\t\tconfirmCallback?: any;\n\t\tcancelCallback?: any;\n\t\tconfirmButtonBackground?: string;\n\t\tconfirmButtonColor?: string;\n\t\tcancelButtonBackground?: string;\n\t\tnoCancelButton?: boolean;\n\t};\n\n\t/**\n\t * Confirmation dialog for use in Red Pill Now apps\n\t *\n\t * @author Keith Strickland\n\t */\n\texport class NowConfirmDialog extends Polymer.Element {\n\t\tstatic get is() { return 'now-confirm-dialog'; }\n\t\tstatic get properties() {\n\t\t\treturn {\n\t\t\t\tdialogTitle: String,\n\t\t\t\tdialogText: {\n\t\t\t\t\ttype: String,\n\t\t\t\t\tobserver: '_onDialogTextChange'\n\t\t\t\t},\n\t\t\t\tconfirmButtonText: {\n\t\t\t\t\ttype: String,\n\t\t\t\t\tvalue: 'OK'\n\t\t\t\t},\n\t\t\t\tcancelButtonText: {\n\t\t\t\t\ttype: String,\n\t\t\t\t\tvalue: 'Cancel'\n\t\t\t\t},\n\t\t\t\tconfirmButtonBackground: {\n\t\t\t\t\ttype: String,\n\t\t\t\t\tobserver: '_onConfirmBackgroundChange'\n\t\t\t\t},\n\t\t\t\tconfirmButtonColor: {\n\t\t\t\t\ttype: String,\n\t\t\t\t\tobserver: '_onConfirmColorChange'\n\t\t\t\t},\n\t\t\t\tcancelButtonBackground: {\n\t\t\t\t\ttype: String,\n\t\t\t\t\tobserver: '_onCancelBackgroundChange'\n\t\t\t\t},\n\t\t\t\tcancelButtonColor: {\n\t\t\t\t\ttype: String,\n\t\t\t\t\tobserver: '_onCancelColorChange'\n\t\t\t\t},\n\t\t\t\tnoCancelButton: {\n\t\t\t\t\ttype: Boolean,\n\t\t\t\t\tvalue: false,\n\t\t\t\t\treflectToAttribute: true\n\t\t\t\t},\n\t\t\t\t_cancelCallback: Function,\n\t\t\t\t_confirmCallback: Function,\n\t\t\t\ttargetMoveCssSelector: String,\n\t\t\t};\n\t\t}\n\t\tget is() {\n\t\t\treturn NowConfirmDialog.is;\n\t\t}\n\n\t\t_closeDialogListener: any;\n\t\tconnectedCallback() {\n\t\t\tsuper.connectedCallback();\n\t\t\tthis._closeDialogListener = this._onDialogClosed.bind(this);\n\t\t\tthis.$.dialog.addEventListener('iron-overlay-closed', this._closeDialogListener);\n\t\t}\n\t\tdisconnectedCallback() {\n\t\t\tthis.$.dialog.removeEventListener('iron-overlay-closed', this._closeDialogListener);\n\t\t}\n\t\t/**\n\t\t * Fired when the dialogText property changes\n\t\t * @private\n\t\t * @param {string} dialogText\n\t\t */\n\t\tprivate _onDialogTextChange(dialogText) {\n\t\t\tif (dialogText.indexOf('\\n') > -1) {\n\t\t\t\tthis.$.dialogText.classList.toggle('preText', true);\n\t\t\t} else {\n\t\t\t\tthis.$.dialogText.classList.toggle('preText', false);\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Fired when the dialog closes. Fires dig-confirm-canceled and dig-confirm-confirmed. Also\n\t\t * runs any cancelCallback or confirmCallback methods\n\t\t * @param  {Event} evt    The event object\n\t\t * @param  {Object} detail The detail object\n\t\t * @listens #dialog.iron-overlay-closed\n\t\t */\n\t\tprivate _onDialogClosed(evt: CustomEvent) {\n\t\t\tlet detail = evt.detail;\n\t\t\tif (!detail.confirmed) {\n\t\t\t\tif (this.get('_cancelCallback')) {\n\t\t\t\t\tthis.get('_cancelCallback').call(this);\n\t\t\t\t}\n\t\t\t\tlet evt = new CustomEvent('now-confirm-canceled');\n\t\t\t\tthis.dispatchEvent(evt);\n\t\t\t}else if (detail.confirmed) {\n\t\t\t\tif (this.get('_confirmCallback')) {\n\t\t\t\t\tthis.get('_confirmCallback').call(this);\n\t\t\t\t}\n\t\t\t\tlet evt = new CustomEvent('now-confirm-confirmed');\n\t\t\t\tthis.dispatchEvent(evt);\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Fired when the confirmButtonBackground changes. Sets the custom style variable --confirm-button-background\n\t\t * @param  {String} newVal The new color\n\t\t * @param  {String} oldVal The old color\n\t\t */\n\t\tprivate _onConfirmBackgroundChange(newVal, oldVal) {\n\t\t\tif (newVal) {\n\t\t\t\tthis.updateStyles({'--now-confirm-dialog-confirm-button-background': newVal});\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Fired when the confirmButtonColor changes. Sets the custom style variable --confirm-button-color\n\t\t * @param  {String} newVal The new color\n\t\t * @param  {String} oldVal The old color\n\t\t */\n\t\tprivate _onConfirmColorChange(newVal, oldVal) {\n\t\t\tif (newVal) {\n\t\t\t\tthis.updateStyles({'--now-confirm-dialog-conform-button-color': newVal })\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Fired when the cancelButtonBackground changes. Sets the custom style variable --cancel-button-background\n\t\t * @param  {String} newVal The new color\n\t\t * @param  {String} oldVal The old color\n\t\t */\n\t\tprivate _onCancelBackgroundChange(newVal, oldVal) {\n\t\t\tif (newVal) {\n\t\t\t\tthis.updateStyles({'--now-confirm-dialog-cancel-button-background': newVal})\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Fired when the cancelButtonColor changes. Sets the custom style variable --cancel-button-color\n\t\t * @param  {String} newVal The new color\n\t\t * @param  {String} oldVal The old color\n\t\t * @return {[type]}        [description]\n\t\t */\n\t\tprivate _onCancelColorChange(newVal, oldVal) {\n\t\t\tif (newVal) {\n\t\t\t\tthis.updateStyles({'--now-confirm-dialog-cancel-button-color': newVal})\n\t\t\t}\n\t\t}\n\t\t/**\n\t\t * Opens the dialog and sets the cancel and confirm callbacks\n\t\t * @param  {Function} confirmCallback Function to run when the dialog is confirmed\n\t\t * @param  {Function} cancelCallback  Function to run when the dialog is cancelled\n\t\t */\n\t\topen(confirmCallback, cancelCallback) {\n\t\t\t// WARNING!!! TODO:\n\t\t\t// Moving this as a child of a top level element, outside of the app-*-layout element\n\t\t\t// is to fix this bug https://github.com/PolymerElements/paper-dialog/issues/7\n\t\t\t// which is kind of ridiculus for a production ready platform.\n\t\t\t// Luckily there really is no data binding with this component or that too\n\t\t\t// would be broken.\n\t\t\tif (this.get('targetMoveCssSelector')) {\n\t\t\t\tlet elem = document.querySelector(this.get('targetMoveCssSelector'));\n\t\t\t\tif (elem) {\n\t\t\t\t\telem.appendChild(this);\n\t\t\t\t}\n\t\t\t}\n\t\t\t(<any>this.$.dialog).open();\n\t\t\tthis.set('_cancelCallback', cancelCallback);\n\t\t\tthis.set('_confirmCallback', confirmCallback);\n\t\t}\n\t\t/**\n\t\t * Closes the dialog. Will cause the cancel callback to be run\n\t\t * in the iron-overlay-closed event handler\n\t\t */\n\t\tclose() {\n\t\t\t(<any>this.$.dialog).close();\n\t\t\tif (this.get('targetMoveCssSelector')) {\n\t\t\t\tlet movedDialog = document.querySelector(this.get('targetMoveCssSelector') + ' > now-confirm-dialog');\n\t\t\t\tif (movedDialog) {\n\t\t\t\t\tmovedDialog.parentNode.removeChild(movedDialog);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\ncustomElements.define(NowElements.NowConfirmDialog.is, NowElements.NowConfirmDialog);\n\n"]}